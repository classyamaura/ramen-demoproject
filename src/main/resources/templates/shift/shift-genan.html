 <!DOCTYPE html>
  <html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>シフト管理</title>
    <style>
      table {
        border-collapse: collapse;
        width: 350px;
        border: 4px solid #333;
        margin: 20px auto;
      }
      th, td {
        border: 1px solid #999;
        width: 50px;
        height: 50px;
        text-align: center;
        vertical-align: middle;
      }
      th { background-color: #f2f2f2; }
      .sunday { color: red; }
      .saturday { color: blue; }
      .holiday { color: red; }
      .clickable:hover { background-color: #d0e7ff; }
      .highlight { background-color: #ffff99; }

      .modal {
        display: none;
        position: fixed;
        z-index: 10;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.5);
      }

      .modal-content {
        background-color: #fff;
        margin: 5% auto;
        padding: 20px;
        border: 2px solid #666;
        width: 95%;
        max-width: 800px;
        border-radius: 10px;
        text-align: center;
        overflow-x: auto;
      }

      .modal-content table {
        border-collapse: collapse;
        width: 100%;
        min-width: 600px;
        font-size: 0.85rem;
      }

      .modal-content th, .modal-content td {
        border: 1px solid #999;
        padding: 4px;
        text-align: center;
        white-space: nowrap;
      }

      .modal-content td:nth-child(2),
      .modal-content th:nth-child(2) {
        width: 120px;
      }

      .modal-content td:nth-child(3),
      .modal-content th:nth-child(3) {
        width: 100px;
      }

      .close {
        color: #aaa;
        float: right;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
      }
      .close:hover {
        color: black;
      }
    </style>
</head>
<body>
	<div style="max-width: 1000px; margin: 0 auto; text-align: center; position: relative;">

		<!-- 中央に見せたい見出し -->
		<h1 style="margin: 0;">シフト調整</h1>

		<!-- 右寄せエリア（ボタン + プルダウン）-->
		<div style="position: absolute; right: 0; top: 50%; transform: translateY(-50%); display: flex; align-items: center; gap: 10px;">
			<a href="/complete">
				<button type="button">完成（確定画面へ）</button>
			</a>

			<select name="sign" id="out" onchange="handleSelectChange(this)">
				<option value="ログイン中">ログイン中</option>
				<option value="ログアウト">ログアウト</option>
			</select>
		</div>
	</div>

			   
	   
	    <div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
	      <h2 style="margin: 0;">2025年8月</h2>
	      <form method="post">
	        <select name="user" id="user">
	          <option value="8月">8月</option>
			  <option value="7月">7月</option>
	          <option value="9月">9月</option>
	          <option value="10月">10月</option>
	        </select>
	      </form>
	    </div>
		
	<table>
	  <thead>
	    <tr>
	      <th class="sunday">日</th>
	      <th>月</th>
	      <th>火</th>
	      <th>水</th>
	      <th>木</th>
	      <th>金</th>
	      <th class="saturday">土</th>
	    </tr>
	  </thead>
	  <tbody>
	     <tr>
	       <td class="sunday"></td>
	       <td></td>
	       <td></td>
	       <td></td>
	       <td></td>
	       <td class="clickable highlight" onclick="openModal(this)">1</td>
	       <td class="saturday">2</td>
	     </tr>
	     <tr>
	       <td class="sunday highlight">3</td>
	       <td>4</td>
	       <td>5</td>
	       <td>6</td>
	       <td>7</td>
	       <td class="highlight">8</td>
	       <td class="saturday highlight">9</td>
	     </tr>
	     <tr>
	       <td class="sunday">10</td>
	       <td class="holiday highlight">11</td>
	       <td>12</td>
	       <td class="highlight">13</td>
	       <td>14</td>
	       <td>15</td>
	       <td class="saturday">16</td>
	     </tr>
	     <tr>
	       <td class="sunday">17</td>
	       <td class="highlight">18</td>
	       <td>19</td>
	       <td>20</td>
	       <td>21</td>
	       <td>22</td>
	       <td class="saturday highlight">23</td>
	     </tr>
	     <tr>
	       <td class="sunday">24</td>
	       <td>25</td>
	       <td class="highlight">26</td>
	       <td>27</td>
	       <td class="highlight">28</td>
	       <td>29</td>
	       <td class="saturday">30</td>
	     </tr>
	     <tr>
	       <td class="sunday">31</td>
	       <td></td>
	       <td></td>
	       <td></td>
	       <td></td>
	       <td></td>
	       <td class="saturday"></td>
	     </tr>
	   </tbody>
	</table>
	
	<!-- モーダル -->
	<div id="modal" class="modal">
	  <div class="modal-content">
	    <span class="close" onclick="closeModal()">&times;</span>
	    <h3>2025年8月1日</h3>
	    <p>シフトを選択してください</p>
	    <button onclick="saveShift()">変更を保存</button>
	  </div>
	</div>
	
	<!-- モーダル内シフト表 -->
	<table>
		<thead>
			<tr>
				<th></th>
				<th>氏名</th>
				<th>担当業務</th>
				<th>9</th><th>10</th><th>11</th><th>12</th><th>13</th>
				<th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th>
				<th>20</th><th>21</th><th>22</th><th>23</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>1</td>
				<td>佐藤翔太</td>
				<td>受付</td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable highlight"></td>
				<td class="shift clickable highlight"></td>
				<td class="shift clickable highlight"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
			</tr>
			<tr>
				<td>2</td>
				<td>田中美咲</td>
				<td>キッチン</td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable highlight"></td>
				<td class="shift clickable highlight"></td>
				<td class="shift clickable highlight"></td>
				<td class="shift clickable highlight"></td>
				<td class="shift clickable"></td>
				<td class="shift clickable"></td>
			</tr>
		</tbody>
		</table>
		<button onclick="saveShift()" style="margin-top: 20px; padding: 8px 16px; font-size: 1rem;">変更を保存</button>
		</div>
	</div>


	<!-- JavaScript（モーダル制御） -->
	<script>
		let clickedCell = null;
		function openModal(cell) {
		  clickedCell = cell; // クリックしたセルを保存
	    document.getElementById("modal").style.display = "block";
	  }
	  function closeModal() {
	    document.getElementById("modal").style.display = "none";
	  }
	  // モーダル外クリックで閉じる
	  window.onclick = function(event) {
	    const modal = document.getElementById("modal");
	    if (event.target === modal) {
	      modal.style.display = "none";
	    }
	  }
	  // クリックでハイライトを切り替える
	  document.addEventListener('DOMContentLoaded', function () {
	  	document.querySelectorAll('.shift.clickable').forEach(cell => {
	  		cell.addEventListener('click', function () {
	  			this.classList.toggle('highlight');
	  		});
	  	});
	  });
	  
	  function saveShift() {
	      alert("シフトの変更を保存しました！");
		  if (clickedCell) {
		      clickedCell.classList.remove('highlight'); // ハイライト削除
		      clickedCell = null; // クリア
		    }
		    closeModal(); // モーダルを閉じる
	    }
		function handleSelectChange(select) {
						  	           if (select.value === "ログアウト") {
						  	               window.location.href = "http://localhost:8080/shifttop";
						  	           }
						  	       }
	</script>

	
</body>
</html>